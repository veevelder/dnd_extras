{"name":"Split","type":"script","author":"ODc5MmQ1Y2RhY2M3","img":"icons/svg/downgrade.svg","scope":"global","command":"let t = canvas.tokens.get(args[1])\n\nif(t.data.height > 1) {\n    await scene.updateEmbeddedEntity(\"Token\", {\"_id\": args[1], \"height\": (t.data.height - 1), \"width\": (t.data.width - 1)})\n}\nelse {\n    await scene.updateEmbeddedEntity(\"Token\", {\"_id\": args[1], \"scale\": (t.data.scale / 2)})\n}\nlet targetScene = game.scenes.get(args[2])\nlet new_t = t.clone()\nawait targetScene.createEmbeddedEntity('Token', mergeObject(new_t.data, { \"x\": t.data.x || 0, \"y\": t.data.y || 0}, { overwrite: true, inplace: true }));","folder":null,"sort":0,"permission":{"default":0,"ODc5MmQ1Y2RhY2M3":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.UsMFbV3SECkQKoz0"}},"_id":"D0AUsuANuHE0o2sn"}
{"name":"Remove Condition","type":"script","author":"ODc5MmQ1Y2RhY2M3","img":"icons/svg/degen.svg","scope":"global","command":"CONDITIONS = ['Blind', 'Charmed', 'Deafened', 'Frightened', 'Grappled', 'Paralyzed', 'Petrified', 'Poisoned', 'Prone', 'Restrained', 'Stunned', 'Unconscious']\nlet tokens = game.canvas.tokens.controlled\nfor(var i = 0; i < tokens.length; i++) {\n\tfor (var j = 0; j < CONDITIONS.length; j++) {\n\t\tlet effect = tokens[i].actor.effects.find(e => e.data.label === CONDITIONS[j]);\n\t\tif(effect) await effect.delete()\n\t}\n}","folder":null,"sort":0,"permission":{"default":0,"ODc5MmQ1Y2RhY2M3":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.9nyEgFzgF2ZjNKPl"}},"_id":"JBrYfESruR3YUotj"}
{"name":"Apply Condition","type":"script","author":"ODc5MmQ1Y2RhY2M3","img":"icons/svg/regen.svg","scope":"global","command":"let CONDITIONS = ['Blind', 'Charmed', 'Deafened', 'Frightened', 'Grappled', 'Paralyzed', 'Petrified', 'Poisoned', 'Prone', 'Restrained', 'Stunned', 'Unconscious']\nlet tokens = game.canvas.tokens.controlled\nfor(var i = 0; i < tokens.length; i++) {\n\tfor (var j = 0; j < CONDITIONS.length; j++) {\n\t\tlet effect = tokens[i].actor.effects.find(e => e.data.label === CONDITIONS[j]);\n\t\tif(effect) await effect.delete()\n\t}\n}","folder":null,"sort":0,"permission":{"default":0,"ODc5MmQ1Y2RhY2M3":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.iViN1Mgk7XhN2Opz"}},"_id":"PbH7eA7Xxq78VWxg"}
{"name":"Enlarge-Reduce","type":"script","author":"ODc5MmQ1Y2RhY2M3","img":"icons/svg/up.svg","scope":"global","command":"//#args 0=tokenId 1 = sceneId\nlet enlarge = args[0] === \"on\";\nlet t = canvas.tokens.get(args[1])\n\nnew Dialog({\n  title: \"Enlarge/Reduce\",\n  content: \"Enlarge or Reduce Target?\",\n  buttons: {\n    button1: {\n      label: \"Enlarge\",\n      callback: () => {scene.updateEmbeddedEntity(\"Token\", {\"_id\": args[1], \"height\": (t.data.height + 1), \"width\": (t.data.width + 1)})},\n    },\n    button2: {\n      label: \"Reduce\",\n      callback: () => {scene.updateEmbeddedEntity(\"Token\", {\"_id\": args[1], \"height\": (t.data.height - 1), \"width\": (t.data.width - 1)})},\n    }\n  }\n}).render(true);","folder":null,"sort":0,"permission":{"default":0,"ODc5MmQ1Y2RhY2M3":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.EgIueSaKWDVAz3Oy"}},"_id":"RwEE2BkD3OBL5Bki"}
{"name":"Update Actor/Items","type":"script","author":"ODc5MmQ1Y2RhY2M3","img":"icons/svg/dice-target.svg","scope":"global","command":"//loop over items\ngame.items.forEach(item => {\n\t//loop over actors\n\tgame.actors.forEach(async actor => {\n\t\t//loop over actors items\n\t\tactor.data.items.forEach(async a_items => {\n\t\t\tif (a_items.name == item.name && a_items.type == item.type) {\n\t\t\t\tconsole.log(\"update actor \" + actor.name + \" item: \" + a_items.name + \" with \" + item.name)\n\t\t\t\tawait actor.deleteEmbeddedDocuments(\"Item\", [a_items.id])\n\t\t\t\tawait actor.createEmbeddedDocuments(\"Item\", [item.toObject()])\n\t\t\t}\n\t\t})\n\t})\n})","folder":null,"sort":0,"permission":{"default":0,"ODc5MmQ1Y2RhY2M3":3},"flags":{"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.MP7HeKJlWfU8HJi6"}},"_id":"TbU3vMfLOIJrQn4c"}
{"name":"Update Tokens","type":"script","author":"ODc5MmQ1Y2RhY2M3","img":"icons/svg/mystery-man.svg","scope":"global","command":"const tokens = canvas.tokens.placeables.map(token => {\n  return {\n    _id: token.id,\n    \"bar1.attribute\": \"attributes.hp\",\n    \"bar2.attribute\": \"\",\n    \"displayName\": CONST.TOKEN_DISPLAY_MODES.OWNER_HOVER,\n    \"displayBars\": CONST.TOKEN_DISPLAY_MODES.OWNER,\n    vision: true\n  };\n});\n\ncanvas.scene.updateEmbeddedEntity('Token', tokens)","folder":null,"sort":0,"permission":{"default":0,"ODc5MmQ1Y2RhY2M3":3},"flags":{"furnace":{"runAsGM":true},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.NrhybFJAcuM96IDm"}},"_id":"Tbkz9cyarq4fXrTs"}
{"name":"Summon","type":"script","author":"ODc5MmQ1Y2RhY2M3","img":"icons/svg/door-exit.svg","scope":"global","command":"let t = canvas.tokens.get(args[1])\nlet targetScene = game.scenes.get(args[2])\nlet new_t = game.actors.getName(args[3])\nawait targetScene.createEmbeddedEntity('Token', mergeObject(new_t.data, { \"x\": t.data.x || 0, \"y\": t.data.y || 0}, { overwrite: true, inplace: true }));","folder":null,"sort":0,"permission":{"default":0,"ODc5MmQ1Y2RhY2M3":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.wy5Ea141yu8Bjk5L"}},"_id":"oLSslDmzlsxq1urH"}
{"name":"Invisibility","type":"script","author":"ODc5MmQ1Y2RhY2M3","img":"icons/svg/blind.svg","scope":"global","command":"//#args 0=tokenId 1 = sceneId\nlet hide = args[0] === \"on\";\nscene.updateEmbeddedEntity(\"Token\", {\"_id\": args[1], \"hidden\": hide})","folder":null,"sort":0,"permission":{"default":0,"devnIbfBHb74U9Zv":3,"ODc5MmQ1Y2RhY2M3":3},"flags":{"furnace":{"gmexecute":true,"runAsGM":true},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Compendium.dae.sample-macros.oWh4uTrugSY4uEdi"}},"_id":"zAzHnzqcCYEuPnY2"}
